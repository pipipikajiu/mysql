## 1 . b-tree索引(二叉平衡数)
```javascript
    Myisam innodb 引擎默认使用B-tree索引
    B-tree索引:查询N条数据,最多log2(N)次可以查询的到
```
## 2 . hash索引:
```javascript
hash函数:
唯一性(理论上讲,不同值 通过hash计算,返回的内容 是不同的,这样才可以 找到准确的位置,但是不可能一直满足,总会有 不同值返回的内容是一样的,但是概率很小)
确定性(同一个值,通过hash计算,返回的内容是一样的,所以根据hash每次查找的同一个内容,返回的位置也是一样的)
离散性(相似的字段,在磁盘上的位置,不是相邻,而是随机分布)

- 1. 因为有离散性,hash 不能对范围查询进行优化,B-tree可以;
- 2. 无法利用前缀索引,B-tree可以,比如:field列的值'helloworld' 添加索引,查询 xx=''helloworld或者xx like hello%,可以进行查询,但是hash就不行,因为 hello 和helloworld的没有位置关系,是随机分布的.
- 3. hash 不能进行排序优化, 
- 4 . 必须回行,就是通过索引拿到数据在磁盘的位置,然后回到磁盘上 那具体数据,这个过程叫回行

所以 只有在内存表里采用hash索引
```

## 3 . 左前缀规则:

```javascript
b-tree索引常见误区:
- 1. 在where条件常用的列上都加索引,只能有一个索引起作用.
- 2. 若想多列索引都起作用,不能把索引加到每一列上,得把多列绑在一起,建立联合索引.并要满足左前缀规则.
``

```javascript
    索引不仅可以用在查询上,还可以用在排序上.

    查看索引:explain select * from ......

```

## 4 . 聚簇索引&非聚簇索引
- 1. Myisam :非聚簇索引
```javascript
    xx.myi : 索引文件
    xx.myd : 数据文件
   - 1.  索引和数据是独立文件,所以叫非聚簇索引.

   - 2. Myisam有回行操作,得根据索引内容,回到磁盘找数据.
   - 3. 主索引和次索引,都指向物理行(磁盘位置);
```

- 2 .  innodb : 聚簇索引:
```javascript
   - 1.  不用回行.
   - 2.  聚簇索引:  主索引文件上,直接存放该行数据; 次索引指向对主键的引用(意思就是:利用主键索引查,可以直接找到所有数据,若用次级索引查,只能找先到主键值,再根据主键值,找到所有数据).
   - 3 . 对于innodb来说:
        - 3.1 . 主键索引,即存储索引值,又在叶子中存储行的数据,
        - 3.2 . 如果没有主键(primary key),则会 Unique key 做主键,
        - 3.3 . 如果没有Unique ,系统则生成一个内部的 rowid 做主键,
        - 3.4 . 像innodb中,主键的索引结构中,即存储了主键值,有存储了行数据,这种结构成为 聚簇索引. 
```

```javascript
    聚簇索引:
    优势: 根据主键查询条目比较少时,不用回行(数据就在主键节点下);
    劣势: 如果碰不到不规则数据插入时,造成频繁的页分裂,导致插入速度放慢.
```
<!-- $pdo = new PDO('mysql://host=localhost;dbname=test','root','123456');
$pdo -> query('use test');
$pdo -> query('set names utf8'); -->

## 5 . 索引覆盖:
```javascript
    索引覆盖是指 : 如果查询的列恰好是索引的一部分,那么查询只需要在索引文件上进行,不需要回行到磁盘再找数据.
```
## 6 . 理想的索引:
```javascript
    - 1. 查询频繁;
    - 2. 长度小;
    - 3. 区分高度;
    - 4. 尽量能覆盖常用查询字段. 
```
